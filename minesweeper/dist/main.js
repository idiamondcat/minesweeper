(()=>{"use strict";var e={d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var s=n.getElementsByTagName("script");if(s.length)for(var l=s.length-1;l>-1&&!t;)t=s[l--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.d({},{Z:()=>j});const t=e.p+"assets/opencell.wav",n=e.p+"assets/boom.wav";class s{constructor(e,t,n,s,l){this.isBomb=Boolean(e),this.isFlag=!1,this.isOpen=!1,this.i=t,this.j=n,this.arr=s,this.currentElem=null,this.counter=l}createCell(){this.createAdjacentCells();const e=document.getElementById("#minesweeper");let s=document.createElement("div");s.className=`cell ${this.i}_${this.j}`;let l=document.createElement("span");if(l.innerHTML=this.value||"",l.classList.add("value"),s.append(l),this.currentElem=s,this.value){switch(this.value){case 1:l.style.color="#2475F2";break;case 2:l.style.color="#24F290";break;case 3:l.style.color="#E64F39";break;case 4:l.style.color="#1251B3";break;case 5:l.style.color="#993B2E";break;case 6:l.style.color="#2ED6E6";break;case 7:l.style.color="#000000";break;case 8:l.style.color="#ffffff";break;case"bomb":l.className="value bm",l.innerHTML=""}e&&e.append(s)}return s.addEventListener("contextmenu",(e=>{e.preventDefault(),this.isOpen||this.isFlag?(this.isFlag=!1,s.classList.remove("flagged")):(this.isFlag=!0,s.classList.add("flagged"))})),s.addEventListener("click",(()=>{const e=new Audio(t),s=new Audio(n);if(!this.isOpen&&!this.isFlag)if(this.isBomb)s.play();else{e.pause(),e.currentTime=0,e.play();const t=document.querySelector(".counter__field");let n=t.value;n=Number(n)+1,t.setAttribute("value",n.toString())}})),s.addEventListener("click",this.onClickCell.bind(this)),s}onClickCell(){this.isOpen||this.isFlag||(this.isOpen=!0,this.currentElem.classList.add("opened"),this.isBomb?j():this.value?this.value&&"number"==typeof this.value&&this.currentElem.classList.add("opened"):this.getAdjacentCells(this.i,this.j).forEach((e=>{e.onClickCell()})))}setCounter(){return this.counter}setNewValue(e){this.value=e}createAdjacentCells(){if(this.isBomb)return void this.setNewValue("bomb");const e=this.getAdjacentCells(this.i,this.j);let t=0;e.forEach((e=>{(1===e||e.isBomb)&&t++})),0!==t&&this.setNewValue(t)}getAdjacentCells(e,t){return[this.arr[e-1]?.[t],this.arr[e+1]?.[t],this.arr[e]?.[t-1],this.arr[e]?.[t+1],this.arr[e+1]?.[t+1],this.arr[e-1]?.[t-1],this.arr[e+1]?.[t-1],this.arr[e-1]?.[t+1]].filter((e=>void 0!==e))}}const l=e.p+"assets/videogame-death-sound.mp3",a=e.p+"assets/win-sound.mp3",c=e.p+"assets/arrow.svg",o=e.p+"assets/bomb.svg",i=e.p+"assets/clock.svg",r=e.p+"assets/close.svg",u=e.p+"assets/lvl.svg",d=e.p+"assets/game-over.svg",m=e.p+"assets/win.svg",_=e.p+"assets/back-btn.svg",p=e.p+"assets/flag.svg";let v=[],h=10,b=10,g=localStorage.getItem("bombs")?Number(localStorage.getItem("bombs")):10,f=0,y=!1,S=!1,L=0,k=localStorage.getItem("level")?localStorage.getItem("level"):"easy",w=null;const q=document.querySelector("body"),E=new Audio(l),$=new Audio(a);function A(){const e=document.querySelector(".gamefield > .gamefield__game");e.innerHTML="";const t=document.createElement("div"),n=function(){v=[];for(let e=0;e<h;e++){v[e]=[];for(let t=0;t<b;t++)v[e][t]=0}return function(e){let t=g,n=[...e];for(;t;){const e=Math.floor(Math.random()*(h-1-0+1)+0),s=Math.floor(Math.random()*(b-1-0+1)+0);n[e][s]||(n[e][s]=1,t--)}return n}(v)}();t.id="minesweeper",t.className=`gamefield__content ${k}`,e.append(t),n.forEach(((e,l)=>{e.forEach(((e,a)=>{let c=function(e,t,n,l,a){const c=new s(e,t,n,l,a);return c.createAdjacentCells(),c.createCell(),c}(n[l][a],l,a,n,f);n[l][a]=c,t.append(c.currentElem)}))})),t.addEventListener("contextmenu",(e=>{const t=e.target.parentNode,n=t.querySelectorAll(".cell.flagged").length;L=n,document.querySelector(".flag-counter__field").setAttribute("value",L),I(t)})),t.addEventListener("click",(e=>{I(e.target.parentNode)}))}function I(e){const t=e,n=Array.from(t.querySelectorAll(".cell")).filter((e=>!e.classList.contains("opened"))).length;L===g&&0==n-L&&function(){const e=document.querySelector(".pop-up-overlay--end-game"),t=document.querySelector(".win-pop-up"),n=document.querySelector(".win-pop-up__btn.new-game-btn"),s=document.querySelector(".win-pop-up__btn.exit-btn"),l=document.querySelector(".timer__field").value,a=document.querySelector(".counter__field").value;t.classList.remove("visually-hidden"),e.classList.remove("pop-up-overlay--off"),clearInterval(w),$.play(),function(e,t){let n=JSON.parse(localStorage.getItem("results"));console.log(n),null==n&&(n=[]);let s={time:e,moves:t};localStorage.setItem("result",JSON.stringify(s)),n.push(s),n.length>10&&n.pop(),localStorage.setItem("results",JSON.stringify(n))}(l,a),console.log(JSON.parse(localStorage.getItem("results"))),s.addEventListener("click",(n=>{B(),$.pause(),$.currentTime=0,t.classList.add("visually-hidden"),e.classList.add("pop-up-overlay--off")})),n&&n.addEventListener("click",(()=>{N(),$.pause(),$.currentTime=0,t.classList.add("visually-hidden"),e.classList.add("pop-up-overlay--off")}))}()}function H(){const e=document.querySelector(".gamefield__btn"),t=document.querySelector(".gamefield__stats-list");t.classList.contains("gamefield__stats-list--hidden")&&(t.classList.remove("gamefield__stats-list--hidden"),e.classList.add("btn--hidden"),A(),T(),document.querySelector(".level__value").innerHTML=`${localStorage.getItem("level")}`,y=!0)}function N(){A(),clearInterval(w),document.querySelector(".timer__field").setAttribute("value","0"),document.querySelector(".counter__field").setAttribute("value","0"),document.querySelector(".flag-counter__field").setAttribute("value","0"),document.querySelector(".level__value").innerHTML=`${localStorage.getItem("level")}`,T(),y=!0}function T(){const e=document.querySelector(".timer__field");let t=e.value;w=setInterval((()=>{S||(t=Number(t)+1,e.setAttribute("value",t.toString()))}),1e3)}function x(e){localStorage.setItem("theme",e),document.documentElement.className=e}function M(e){const t=document.querySelector(".gamefield__content");switch(e){case"easy":h=b=10,k="easy",t&&(t.classList.add("easy"),t.classList.remove("medium"),t.classList.remove("hard"));break;case"medium":h=b=15,k="medium",t&&(t.classList.add("medium"),t.classList.remove("easy"),t.classList.remove("hard"));break;case"hard":h=b=25,k="hard",t&&(t.classList.add("hard"),t.classList.remove("easy"),t.classList.remove("medium"))}}function C(){document.querySelector(".pop-up-overlay").classList.add("pop-up-overlay--off"),S&&(S=!1)}function O(e){let t=document.querySelector(".menu-popup__content").querySelector(".menu-popup__screen--active");t.classList.remove("menu-popup__screen--active"),t.classList.add("visually-hidden"),e.classList.add("menu-popup__screen--active"),e.classList.remove("visually-hidden")}function j(){const e=document.querySelector(".pop-up-overlay--end-game"),t=document.querySelector(".game-over-pop-up"),n=t.querySelector(".game-over-pop-up__btn.new-game-btn"),s=t.querySelector(".game-over-pop-up__btn.exit-btn");t.classList.remove("visually-hidden"),e.classList.remove("pop-up-overlay--off"),clearInterval(w),E.play(),n&&n.addEventListener("click",(()=>{N(),E.pause(),E.currentTime=0,t.classList.add("visually-hidden"),e.classList.add("pop-up-overlay--off")})),s&&s.addEventListener("click",(n=>{B(),E.pause(),E.currentTime=0,t.classList.add("visually-hidden"),e.classList.add("pop-up-overlay--off")}))}function B(){const e=document.querySelector(".btn.btn--start"),t=document.querySelector(".gamefield__stats-list"),n=document.querySelector(".gamefield > .gamefield__game");t.classList.contains("gamefield__stats-list--hidden")||(t.classList.add("gamefield__stats-list--hidden"),e.classList.remove("btn--hidden"),clearInterval(w),document.querySelector(".timer__field").setAttribute("value","0"),document.querySelector(".counter__field").setAttribute("value","0"),document.querySelector(".flag-counter__field").setAttribute("value","0"),n.innerHTML="",y=!1)}!function(){localStorage.setItem("bombs",g),localStorage.setItem("level",k),M(k),q.innerHTML+=`\n        <div class="container">\n            <header class="header minesweeper__header">\n                <button id="switch-theme" class="header__switch-theme-btn"><span class="header__theme-text">Theme:</span>\n                    <span class="header__theme-icon header__theme-icon--light"></span>\n                    <span class="header__theme-icon header__theme-icon--hidden header__theme-icon--dark"></span>\n                </button>\n                <h1 class="header__title">Minesweeper</h1>\n                <button id="menu-btn" class="btn btn--menu header__menu-btn">\n                    <span class="header__menu-btn-text">Menu</span>\n                </button>\n            </header>\n            <main class="gamefield minesweeper__gamefield">\n                <header class="gamefield__header">\n                    <button id="start-btn" class="btn btn--start gamefield__btn">Start</button>\n                    <ul class="gamefield__stats-list gamefield__stats-list--hidden">\n                        <li class="gamefield__stats-item">\n                            <p class="counter">\n                                <label class="counter__name" for="counter-field">Moves:</label>\n                                <input id="counter-field" class="counter__field" type="number" min="0" max="999" value="0" readonly>\n                            </p>\n                        </li>\n                        <li class="gamefield__stats-item">\n                            <p class="bomb-counter">\n                                <span class="bomb-counter__icon-wrapper">\n                                    <img class="bomb-counter__icon" src=${o}>\n                                </span>\n                                <span class="bomb-counter__value">x <b>${localStorage.getItem("bombs")}</b></span>\n                            </p>\n                        </li>\n                        <li class="gamefield__stats-item">\n                            <p class="flag-counter">\n                                <label class="flag-counter__name" for="flag-counter-field">\n                                    <img class="flag-counter__icon" src=${p}>\n                                </label>\n                                <input id="flag-counter-field" class="flag-counter__field" type="number" min="0" max="99" value=${L} readonly>\n                            </p>\n                        </li>\n                        <li class="gamefield__stats-item">\n                            <p class="timer">\n                                <label class="timer__name" for="timer-field">\n                                    <img class="timer__icon" src=${i}>\n                                </label>\n                                <input id="timer-field" class="timer__field" type="number" min="0" max="999" value="0" readonly>\n                            </p>\n                        </li>\n                        <li class="gamefield__stats-item">\n                            <p class="level">\n                                <span class="level__icon-wrapper">\n                                    <img class="level__icon" src=${u}>\n                                </span>\n                                <span class="level__value">${localStorage.getItem("level")}</span>\n                            </p>\n                        </li>\n                    </ul>\n                </header>\n                <div class="gamefield__game"></div>\n            </main>\n            <footer class="footer">\n                <ul class="footer__links-list">\n                    <li class="footer__links-item">\n                        <a class="footer__link footer__link--rss" href="https://app.rs.school/profile?githubId=idiamondcat" target="_blank">RSS</a>\n                    </li>\n                    <li class="footer__links-item">\n                        <a class="footer__link footer__link--git" href="https://github.com/idiamondcat" target="_blank">\n                            <svg class="footer__link-icon" viewBox="0 0 539.67 560.47"><path fill="#fff" d="M539.67 200.47h-19.8v-40.11h-20v-40.11h-20.06V100.3h-19.88V80.35h-20.04V60.46h-20.01v-20h-20.19v-19.7h-40.07V0H180.06v20.76h-39.93v19.65h-20.25v20.03H99.97v19.94H79.94v19.93H60.09v20.23H39.97v39.82H19.94v40.02H0v179.81h19.84v40.06h20.03v20.18h20.06v19.98h19.91v19.98h19.99v20.13h20.02v19.84h20.09v20.13h39.95v19.98h39.84v-80.08h-79.79v-19.98h-20.03v-19.98H99.83v-19.99H79.84v19.99h-.09v-20.18h.09v-19.84h40.07v20.03h20.03v19.99h20.02v19.98h39.86v-19.98h19.98v-19.99h20.06v-20.03h-79.9v-20.13h-20.02v-20.12h-20.03v-19.85H99.59v-119.9h20.32v-20.03h19.93v-19.99h-19.93v-60.14h60.15v20.09h19.97v20.02h19.81v-20.02h100.14v20.02h19.81v-20.02h19.83v-20.09H420v60.1h-20.06v20.02H420v20.04h20.08v119.9h-20.17v20.23h-19.99v19.79h-19.98v20.08H300v19.84h19.94v20.08h19.93v119.95h39.95v-19.93h20.05v-19.99h20.04v-20.27h19.65v-19.84h20.31v-20.08h19.75v-19.84h20.46v-19.84h19.79v-40.16h19.8V200.47z"/></svg>\n                        </a>\n                    </li>\n                </ul>\n                <span class="footer__date">2023</span>\n            </footer>\n            <div class="pop-up-overlay pop-up-overlay--off">\n                <div class="pop-up menu-popup">\n                    <button class="close-btn menu-popup__close-btn">\n                        <img class="close-btn__icon" src=${r}>\n                    </button>\n                    <div class="menu-popup__content"></div>\n                </div>\n            </div>\n            <div class="pop-up-overlay pop-up-overlay--end-game pop-up-overlay--off">\n                <div class="pop-up game-over-pop-up visually-hidden">\n                    <div class="game-over-pop-up__title-wrapper">\n                        <img class="game-over-pop-up__title" src=${d}>\n                    </div>\n                    <span class="game-over-pop-up__text">Try again?</span>\n                    <div class="game-over-pop-up__btn-wrapper">\n                        <button class="game-over-pop-up__btn new-game-btn">Yes <img class="game-over-pop-up__icon" src=${c}></button>\n                        <button class="game-over-pop-up__btn exit-btn">No <img class="game-over-pop-up__icon" src=${c}></button>\n                    </div>\n                </div>\n                <div class="pop-up win-pop-up visually-hidden">\n                    <div class="win-pop-up__title-wrapper">\n                        <img class="win-pop-up__title" src=${m}>\n                    </div>\n                    <div class="win-pop-up__btn-wrapper">\n                        <button class="win-pop-up__btn new-game-btn">New game <img class="win-pop-up__icon" src=${c}></button>\n                        <button class="win-pop-up__btn exit-btn">Exit <img class="win-pop-up__icon" src=${c}></button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `,function(){const e=document.querySelector(".header__theme-icon--dark"),t=document.querySelector(".header__theme-icon--light");"dark-theme"===localStorage.getItem("theme")?(x("dark-theme"),e.classList.contains("header__theme-icon--hidden")&&(t.classList.add("header__theme-icon--hidden"),e.classList.remove("header__theme-icon--hidden"))):(x("light-theme"),t.classList.contains("header__theme-icon--hidden")&&(e.classList.add("header__theme-icon--hidden"),t.classList.remove("header__theme-icon--hidden")))}();const e=document.querySelector(".btn.btn--start"),t=document.querySelector(".header__switch-theme-btn"),n=document.querySelector(".header__menu-btn"),s=document.querySelector(".menu-popup__close-btn");e&&e.addEventListener("click",(()=>{H()})),t&&t.addEventListener("click",(e=>{!function(e){e.preventDefault();const t=document.querySelector(".header__theme-icon--dark"),n=document.querySelector(".header__theme-icon--light");"dark-theme"===localStorage.getItem("theme")?(x("light-theme"),n.classList.contains("header__theme-icon--hidden")&&(t.classList.add("header__theme-icon--hidden"),n.classList.remove("header__theme-icon--hidden"))):(x("dark-theme"),t.classList.contains("header__theme-icon--hidden")&&(n.classList.add("header__theme-icon--hidden"),t.classList.remove("header__theme-icon--hidden")))}(e)})),n&&n.addEventListener("click",(e=>{!function(e){e.preventDefault();const t=document.querySelector(".pop-up-overlay"),n=document.querySelector(".menu-popup").querySelector(".menu-popup__content");n.innerHTML="",t.classList.remove("pop-up-overlay--off"),n.innerHTML+=`\n    <section class="main-menu menu-popup__screen menu-popup__screen--active">\n        <ul class="main-menu__list">\n            ${!0===y?'<li class="main-menu__item"><button class="main-menu__btn continue-btn">Continue</button></li>':""}\n            <li class="main-menu__item">\n                ${!0===y?'<button class="main-menu__btn restart-btn">Restart</button>':'<button class="main-menu__btn new-game-btn">New game</button>'}\n            </li>\n            <li class="main-menu__item">\n                <button class="main-menu__btn rate-btn">Rate <img class="main-menu__icon" src=${c}></button>\n            </li>\n            <li class="main-menu__item">\n                <button class="main-menu__btn level-btn">Level <img class="main-menu__icon" src=${c}></button>\n            </li>\n            <li class="main-menu__item">\n                <button class="main-menu__btn bombs-btn">Bombs <img class="main-menu__icon" src=${c}></button>\n            </li>\n            <li class="main-menu__item">\n                <button class="main-menu__btn stop-btn">Exit</button>\n            </li>\n        </ul>\n    </section>\n    <section class="results menu-popup__screen visually-hidden">\n        <div class="results__wrapper">\n            <button class="back-btn results__back-btn"><img class="back-btn__icon" src="${_}"></button>\n            <h3 class="category-name results__title">Results</h3>\n        </div>\n        <div class="results__list">\n            <div class="results__thead">\n                <div class="results__time-col"><img class="results__time-icon" src=${i}><span class="results__unit">(s)</span></div>\n                <div class="results__moves-col"><span class="results__subtitle">Moves</span></div>\n            </div>\n        </div>\n    </section>\n    <section class="change-bomb-count menu-popup__screen visually-hidden">\n            <div class="change-bomb-count__wrapper">\n                <button class="back-btn change-bomb-count__back-btn"><img class="back-btn__icon" src="${_}"></button>\n                <h3 class="category-name change-bomb-count__title">Bombs</h3>\n            </div>\n            <div class="change-bomb-count__field-wrapper">\n                <button class="change-bomb-count__arrow-btn change-bomb-count__arrow-btn--right">\n                    <img class="change-bomb-count__icon change-bomb-count__icon--right" src=${c}>\n                </button>\n                <input class="field change-bomb-count__field" type="text" size="2" maxlength="2" value="${localStorage.getItem("bombs")}" readonly>\n                <button class="change-bomb-count__arrow-btn change-bomb-count__arrow-btn--left">\n                    <img class="change-bomb-count__icon change-bomb-count__icon--left" src=${c}>\n                </button>\n            </div>\n            <button class="btn change-bomb-count__ok-btn">Ok</button>\n        </section>\n        <section class="change-level menu-popup__screen visually-hidden">\n            <div class="change-level__wrapper">\n                <button class="back-btn change-level__back-btn"><img class="back-btn__icon" src="${_}"></button>\n                <h3 class="category-name change-level__title">Level</h3>\n            </div>\n            <div class="change-level__field-wrapper">\n                <input class="change-level__field" id="easy" type="radio" name="level" value="easy">\n                <label class="btn change-level__lvl-btn" for="easy">Easy</label>\n                <input class="change-level__field" id="medium" type="radio" name="level" value="medium">\n                <label class="btn change-level__lvl-btn" for="medium">Medium</label>\n                <input class="change-level__field" id="hard" type="radio" name="level" value="hard">\n                <label class="btn change-level__lvl-btn" for="hard">Hard</label>\n            </div>\n            <button class="btn change-level__ok-btn">Ok</button>\n        </section>\n    `,S=!0;const s=document.querySelector(".main-menu"),l=s.querySelector(".rate-btn"),a=s.querySelector(".bombs-btn"),o=s.querySelector(".level-btn"),r=s.querySelector(".restart-btn"),u=s.querySelector(".continue-btn"),d=s.querySelector(".main-menu__btn.new-game-btn");s.querySelector(".stop-btn").addEventListener("click",(()=>{y?(B(),C()):C()})),d&&d.addEventListener("click",(()=>{H(),C()})),l&&l.addEventListener("click",(()=>{const e=document.querySelector(".results"),t=e.querySelector(".back-btn"),n=e.querySelector(".results__list"),l=JSON.parse(localStorage.getItem("results"));O(e),null!==l&&l.forEach((e=>{const t=document.createElement("div");t.className="results__item",t.innerHTML=`\n                    <div class="results__result-time">${e.time}</div>\n                    <div class="results__result-moves">${e.moves}</div>\n                `,n.append(t)})),t.addEventListener("click",(()=>{O(s)}))})),y&&(a.setAttribute("disabled",!0),o.setAttribute("disabled",!0)),a&&a.addEventListener("click",(()=>{const e=document.querySelector(".change-bomb-count"),t=document.querySelector(".bomb-counter__value");O(e);const n=document.querySelector(".change-bomb-count__field");let l=Number(n.value);const a=document.querySelector(".change-bomb-count__arrow-btn--right"),c=document.querySelector(".change-bomb-count__arrow-btn--left"),o=document.querySelector(".change-bomb-count__ok-btn");e.querySelector(".back-btn").addEventListener("click",(()=>{O(s)})),a.addEventListener("click",(()=>{if(l>10)return l-=1,n.setAttribute("value",l),l})),c.addEventListener("click",(()=>{if(l<99)return l+=1,n.setAttribute("value",l),l})),o.addEventListener("click",(()=>{g=l,localStorage.setItem("bombs",g),t.innerText="x"+g,O(s)}))})),o&&o.addEventListener("click",(()=>{const e=document.querySelector(".change-level");O(e),function(){const e=document.querySelectorAll('input[name="level"]');for(const t of e)t.value===localStorage.getItem("level")&&(t.checked=!0)}();const t=document.querySelector(".change-level__ok-btn"),n=e.querySelector(".back-btn");t.addEventListener("click",(()=>{const e=document.querySelectorAll('input[name="level"]');for(const t of e)t.checked&&(k=t.value,M(k),localStorage.setItem("level",k),O(s))})),n.addEventListener("click",(()=>{O(s)}))})),r&&r.addEventListener("click",(()=>{N(),C()})),u&&u.addEventListener("click",(()=>{C()}))}(e)})),s&&s.addEventListener("click",(()=>{C()}))}()})();
//# sourceMappingURL=main.js.map